language: python
python:
- '3.4'

node_js:
- '8.6.0'

ruby:
- 1.9.3-p429

before_install:
# Workaround for a permissions issue with Travis virtual machine images
# that breaks Python's multiprocessing:
# https://github.com/travis-ci/travis-cookbooks/issues/155
- sudo rm -rf /dev/shm
- sudo ln -s /run/shm /dev/shm

install:
- npm install
# pip is not able to install distribute: "ImportError: No module named _markerlib"
- easy_install distribute
- pip install -r requirements.txt
- pip install -r requirements-dev.txt
- ./install_assets_deps.sh
- grunt clean build

script:
- nosetests -c nose.cfg --verbosity=1
- ./node_modules/.bin/grunt test
